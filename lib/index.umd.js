!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firework=e()}(this,(function(){"use strict";class t{constructor(){this.queue=[]}add(t){return this.queue.push(new o(t)),this}play(){this.queue.forEach((t=>t.play()))}}const e={targets:void 0,duration:1/0,easing:"linear",update:void 0};const s=(()=>{const t={linear:()=>t=>t},e={Sine:()=>t=>1-Math.cos(t*Math.PI/2),Expo:()=>t=>t?Math.pow(2,10*t-10):0,Circ:()=>t=>1-Math.sqrt(1-t*t),Back:()=>t=>t*t*(3*t-2),Bounce:()=>t=>{let e,s=4;for(;t<((e=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((3*e-2)/22-t,2)}};return["Quad","Cubic","Quart","Quint"].forEach(((t,s)=>{e[t]=()=>t=>Math.pow(t,s+2)})),Object.keys(e).forEach((s=>{const n=e[s];t["easeIn"+s]=n,t["easeOut"+s]=()=>t=>1-n()(1-t),t["easeInOut"+s]=()=>t=>t<.5?n()(2*t)/2:1-n()(-2*t+2)/2,t["easeOutIn"+s]=()=>t=>t<.5?(1-n()(1-2*t))/2:(n()(2*t-1)+1)/2})),t})(),n=(t,e,s,n,o,i=!1)=>{t[o]=i?n:(n-e)*s+e};class o{constructor(t=e){t={...e,...t};const{targets:s,duration:n,easing:o,update:i,...a}=t;this.targets=s,this.duration=n,this.easing=o,this.update=i,this.dest=a||{},this.tl=null,this.isPlay=!1}timeline(){return this.tl||(this.tl=new t),this.tl}play(){this.isPlay||(this.isPlay=!0,(t=>{const e=Date.now(),o=e+t.duration,i=t.targets?Array.isArray(t.targets)?t.targets:[t.targets]:[],a=i.map((e=>{const s={};for(const n in t.dest)s[n]=e[n];return s})),r=(o,r,l=!1)=>{i.forEach(((i,c)=>{Object.keys(t.dest).forEach((h=>{const d=parseFloat(a[c][h]);let u=t.dest[h];if("object"==typeof u){if(!Array.isArray(u)){const{value:o,duration:a,easing:c=t.easing}=u,p=s[c]()((r-e)/a);r<=e+a?n(i,d,p,o,h):l&&n(i,d,p,o,h,l)}}else"function"==typeof u&&(u=u(i,c)),n(i,d,o,u,h,l)}))}))},l=()=>{var n;const a=Date.now();a>o?(r(1,a,!0),t.isPlay=!1):(a>=e&&(r(s[t.easing]()((a-e)/t.duration),a),null===(n=t.update)||void 0===n||n.call(t,i)),requestAnimationFrame(l))};l()})(this))}}const i=t=>new o(t);i.random=(t,e)=>Math.floor(Math.random()*(e-t+1))+t;const a=t=>Array.isArray(t)?i.random(t[0],t[1]):t,r=t=>(Array.isArray(t)?t:[t,t]).map((t=>100*t));class l{constructor(t,e,s,n,o,i,a){if(this.ctx=t,this.x=e,this.y=s,this.color=n,this.color.startsWith("var(")){const[,t]=this.color.match(/var\((--[^)]+)\)/)||[];t&&(this.color=getComputedStyle(document.documentElement).getPropertyValue(t).trim())}this.radius=o,this.alpha=i,this.lineWidth=a,this.rotation=0}draw(){const{ctx:t,x:e,y:s}=this;t.save(),t.translate(e,s),t.rotate(this.rotation*(Math.PI/180)),t.globalAlpha=this.alpha,this.paint(),this.lineWidth?(t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.stroke()):(t.fillStyle=this.color,t.fill()),t.globalAlpha=1,t.restore()}}class c extends l{constructor(t,e,s,n,o,i,a,r){super(t,e,s,n,o,i,r),this.sides=a}paint(){const{ctx:t,sides:e,radius:s}=this;t.beginPath(),t.moveTo(s*Math.cos(0),s*Math.sin(0));for(let n=1;n<=e;n++){const o=2*n*Math.PI/e;t.lineTo(s*Math.cos(o),s*Math.sin(o))}t.closePath()}}class h extends l{constructor(t,e,s,n,o,i,a,r){super(t,e,s,n,o,i,r),this.spikes=a}paint(){const{ctx:t,spikes:e,radius:s}=this;t.beginPath(),t.moveTo(0,-s);for(let n=0;n<2*e;n++){const o=n*Math.PI/e-Math.PI/2,i=n%2==0?s:.5*s,a=Math.cos(o)*i,r=Math.sin(o)*i;t.lineTo(a,r)}t.closePath()}}const d={circle:class extends l{paint(){const{ctx:t}=this;t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI),t.closePath()}},polygon:c,star:h},u=(t,e,s,n)=>{const o=d[n.shape],{shapeOptions:l,colors:u,number:p}=n;let{radius:f,alpha:m=1,lineWidth:y}=l;return m=r(m),Array.from({length:a(p)},(()=>{const r=u[i.random(0,u.length-1)],d=[t,e,s,r,a(f),a(m)/100];o===h?d.push(a(l.spikes)):o===c&&d.push(a(l.sides));const p=new o(...d,a(y));return((t,e)=>{const s=e.move.indexOf("emit");if(s>=0){const{emitRadius:n=[50,180]}=e.moveOptions[s]||{},o=i.random(0,360)*Math.PI/180,r=(i.random(0,1)?1:-1)*a(n);t.endPos={x:t.x+r*Math.cos(o),y:t.y+r*Math.sin(o)}}})(p,n),((t,e)=>{const s=e.move.indexOf("rotate");if(s>=0){const{angle:n=[-180,180]}=e.moveOptions[s]||{};t.endRotation=a(n)}})(p,n),p}))},p=document.createElement("canvas");p.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:9999999",document.body.appendChild(p);const f=p.getContext("2d"),m=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?"touchstart":"click";let y=0,g=0;const v=()=>{if(!f)return;const{clientWidth:t,clientHeight:e}=document.documentElement;p.width=2*t,p.height=2*e,p.style.width=t+"px",p.style.height=e+"px",f.setTransform(1,0,0,1,0,0),f.scale(2,2)},x=t=>{const{alpha:e=0,alphaEasing:s="linear",alphaDuration:n=[600,800]}=t;return{value:a(r(e))/100,easing:s,duration:a(n)}},M=t=>{const{move:e,moveOptions:s}=t,n={};return e.forEach(((t,e)=>{const o=s[e]||{};if("emit"===t){const{radius:t=.1,alphaChange:e=!1}=o;n.x=t=>t.endPos.x,n.y=t=>t.endPos.y,n.radius=a(t),e&&(n.alpha=x(o))}else if("diffuse"===t){const{diffuseRadius:t=[80,160],lineWidth:e=0}=o;n.radius=a(t),n.lineWidth=a(e),n.alpha=x(o)}else"rotate"===t&&(n.rotation=t=>t.endRotation)})),n},P=t=>{for(const e of t)e.draw()},w=i({duration:1/0,update(){f&&f.clearRect(0,0,p.width,p.height)}});let A=null,E=null;const b=t=>{E=t,A&&document.removeEventListener(m,A,!1),A=e=>{t.excludeElements.some((t=>{return s=e.target,n=t,!!(null===(o=s.closest)||void 0===o?void 0:o.call(s,n));var s,n,o}))||(w.play(),(t=>{var e,s;const{clientX:n,clientY:o}=null!==(s=null===(e=t.touches)||void 0===e?void 0:e[0])&&void 0!==s?s:t;y=n,g=o})(e),O(y,g))},document.addEventListener(m,A,!1),v(),window.removeEventListener("resize",v,!1),window.addEventListener("resize",v,!1)},O=(t,e)=>{if(!E||!f)return;const{particles:s}=E,n=i().timeline();s.forEach((s=>{const{move:o,moveOptions:i}=s;s.move=Array.isArray(o)?o:[o],s.moveOptions=i?Array.isArray(i)?i:[i]:[],n.add({targets:u(f,t,e,s),duration:a(s.duration),easing:s.easing||"linear",update:P,...M(s)})})),n.play()};return t=>{"loading"===document.readyState?window.addEventListener("DOMContentLoaded",(()=>b(t)),{passive:!0}):b(t)}}));
