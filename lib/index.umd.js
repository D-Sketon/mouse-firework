!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firework=e()}(this,(function(){"use strict";class t{constructor(){this.queue=[]}add(t){return this.queue.push(new s(t)),this}play(){this.queue.forEach((t=>t.play()))}}const e={targets:null,duration:1/0,easing:"linear",delay:0,begin:null,update:null,complete:null};var n=()=>{const t={linear:()=>t=>t},e={Sine:()=>t=>1-Math.cos(t*Math.PI/2),Circ:()=>t=>1-Math.sqrt(1-t*t),Back:()=>t=>t*t*(3*t-2),Bounce:()=>t=>{let e,n=4;for(;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}};return["Quad","Cubic","Quart","Quint","Expo"].forEach(((t,n)=>{e[t]=()=>t=>Math.pow(t,n+2)})),Object.keys(e).forEach((n=>{const a=e[n];t["easeIn"+n]=a,t["easeOut"+n]=()=>t=>1-a()(1-t),t["easeInOut"+n]=()=>t=>t<.5?a()(2*t)/2:1-a()(-2*t+2)/2,t["easeOutIn"+n]=()=>t=>t<.5?(1-a()(1-2*t))/2:(a()(2*t-1)+1)/2})),t};const a=["translateX","translateY","translateZ"],o=(t,e)=>t instanceof HTMLElement&&t.style&&"transform"in t.style&&a.includes(e)?"transform":t instanceof HTMLElement&&t.style&&e in t.style?"style":"attribute";class s{constructor(t=e){t=Object.assign({},e,t);const{targets:n,duration:a,easing:o,delay:s,begin:i,update:r,complete:l,...d}=t;this.targets=n,this.duration=a,this.easing=o,this.delay=s,this.begin=i,this.update=r,this.complete=l,this.dest=d||{},this.tl=null,this.isPlay=!1}timeline(){return null===this.tl&&(this.tl=new t),this.tl}play(){this.isPlay||(this.isPlay=!0,(t=>{const e=Date.now()+t.delay,a=e+t.duration,s=!!t.targets,i=[],r=(t,e,n,a,s,i=!1)=>{let r;if("string"==typeof a)if(a.endsWith("%"))r="%",a=parseFloat(a);else{if(!a.endsWith("px"))throw new TypeError("string value must ends with '%' or 'px'");r="px",a=parseFloat(a)}let l=i?a:(a-e)*n+e;switch(r&&(l+=r),o(t,s)){case"transform":t.style.transform=r?`${s}(${l})`:`${s}(${l}px)`;break;case"style":t.style[s]=l;break;case"attribute":t[s]=l}},l=(a,o,s=!1)=>{t.targets.forEach(((l,d)=>{Object.keys(t.dest).forEach((c=>{const u=parseFloat(i[d][c]);let h=t.dest[c];if("object"==typeof h)if(Array.isArray(h)){let i=0;for(;i<h.length&&!(o-e<h[i].startTimeStamp);i++);const{value:d,duration:p,easing:f,startTimeStamp:y}=h[i-1];o<=e+p+y?(a=n()[f||t.easing]()((o-e)/p),r(l,u,a,d,c)):s&&r(l,u,a,d,c,s)}else{const{value:i,duration:d,easing:p}=h;o<=e+d?(a=n()[p||t.easing]()((o-e)/d),r(l,u,a,i,c)):s&&r(l,u,a,i,c,s)}else"function"==typeof h&&(h=h(l,d)),r(l,u,a,h,c,s)}))}))},d=()=>{const o=Date.now();if(o>a)return l(1,o,!0),"function"==typeof t.complete&&t.complete(t.targets),void(t.isPlay=!1);if(o<e)return void requestAnimationFrame(d);const i=n()[t.easing]()((o-e)/t.duration);s&&l(i,o),"function"==typeof t.update&&t.update(t.targets),requestAnimationFrame(d)};(()=>{if(s){Array.isArray(t.targets)||(t.targets=[t.targets]);for(const e of t.targets){const n={};for(const a in t.dest){const s=t.dest[a];if(Array.isArray(s))if(2===s.length&&"object"!=typeof s[0]){switch(o(e,a)){case"transform":"string"==typeof s[0]?e.style.transform=`${a}(${s[0]})`:e.style.transform=`${a}(${s[0]}px)`;break;case"style":e.style[a]=s[0];break;case"attribute":e[a]=s[0]}n[a]=s[0],t.dest[a]=s[1]}else{let t=0;for(let e of s)e.startTimeStamp=t,t+=e.duration;n[a]=e[a]}else switch(o(e,a)){case"transform":const t=new RegExp(`${a}((w+))`,"g");n[a]=e.style.transform.match(t)[0];break;case"style":n[a]=e.style[a];break;case"attribute":n[a]=e[a]}}i.push(n)}}})(),"function"==typeof t.begin&&t.begin(t.targets),d()})(this))}}const i=t=>new s(t);i.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};const r=t=>Array.isArray(t)?i.random(t[0],t[1]):t,l=(t,e)=>{e=e.toUpperCase();do{if(null==t)break;if(t.nodeName===e)return!0}while(null!==(t=t.parentNode));return!1},d=document.createElement("canvas");d.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:9999999",document.body.appendChild(d);const c=d.getContext("2d"),u=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?"touchstart":"click";let h=0,p=0;const f=()=>{d.width=2*window.innerWidth,d.height=2*window.innerHeight,d.style.width=window.innerWidth+"px",d.style.height=window.innerHeight+"px",d.getContext("2d").scale(2,2)},y=(t,e)=>{var n;const{move:a}=e;if(a.includes("emit")){const{emitRadius:a=[50,180]}=null!==(n=e.moveOptions)&&void 0!==n?n:{};t.endPos=((t,e)=>{const n=i.random(0,360)*Math.PI/180,a=[-1,1][i.random(0,1)]*e;return{x:t.x+a*Math.cos(n),y:t.y+a*Math.sin(n)}})(t,r(a))}},g=(t,e)=>{var n;const{move:a}=e;if(a.includes("rotate")){const{angle:a=[-180,180]}=null!==(n=e.moveOptions)&&void 0!==n?n:{};t.endRotation=r(a)}},m=t=>{var e,n;const{move:a}=t;let o={};if(a.includes("emit")){const{radius:n=.1,alphaChange:a=!1,alpha:s=0,alphaEasing:i="linear",alphaDuration:l=[600,800]}=null!==(e=t.moveOptions)&&void 0!==e?e:{};let d={};a&&(d={alpha:{value:r(s),easing:i,duration:r(l)}}),o={...o,x:t=>t.endPos.x,y:t=>t.endPos.y,radius:r(n),...d}}else if(a.includes("diffuse")){const{diffuseRadius:e=[80,160],lineWidth:a=0,alpha:s=0,alphaEasing:i="linear",alphaDuration:l=[600,800]}=null!==(n=t.moveOptions)&&void 0!==n?n:{};o={...o,radius:r(e),lineWidth:r(a),alpha:{value:r(s),easing:i,duration:r(l)}}}return a.includes("rotate")&&(o={...o,rotation:t=>t.endRotation}),o},v=(t,e,n)=>{const a=r(n.number),{radius:o,alpha:s=1,lineWidth:l}=n.shapeOptions,d=[];for(let u=0;u<a;u++){const a={x:t,y:e,color:void 0,radius:void 0,endPos:void 0,rotation:0,endRotation:void 0,draw(){c.globalAlpha=a.alpha,c.beginPath(),c.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),l?(c.lineWidth=a.lineWidth,c.strokeStyle=a.color,c.stroke()):(c.fillStyle=a.color,c.fill()),c.globalAlpha=1}};a.color=n.colors[i.random(0,n.colors.length-1)],a.radius=r(o),a.alpha=r(s),l&&(a.lineWidth=r(l)),y(a,n),g(a,n),d.push(a)}return d},w=(t,e,n)=>{const a=r(n.number),{radius:o,alpha:s=1,lineWidth:l}=n.shapeOptions,d=r(n.shapeOptions.spikes),u=[];for(let h=0;h<a;h++){const a={x:t,y:e,color:void 0,radius:void 0,endPos:void 0,rotation:0,endRotation:void 0,draw(){c.save(),c.translate(a.x,a.y),c.rotate(a.rotation*(Math.PI/180)),c.globalAlpha=a.alpha,c.beginPath(),c.moveTo(0,0-a.radius);for(let t=0;t<2*d;t++){const e=t*Math.PI/d-Math.PI/2,n=t%2==0?a.radius:.5*a.radius,o=Math.cos(e)*n,s=Math.sin(e)*n;c.lineTo(o,s)}c.closePath(),l?(c.lineWidth=a.lineWidth,c.strokeStyle=a.color,c.stroke()):(c.fillStyle=a.color,c.fill()),c.globalAlpha=1,c.restore()}};a.color=n.colors[i.random(0,n.colors.length-1)],a.radius=r(o),a.alpha=r(s),l&&(a.lineWidth=r(l)),y(a,n),g(a,n),u.push(a)}return u},b=t=>{for(const e of t)e.draw()},x=i({duration:1/0,update(){c.clearRect(0,0,d.width,d.height)}});let M=null,P=null;const E=t=>{P=t,M&&document.removeEventListener(u,M,!1),M=e=>{for(const n of t.excludeElements)if(l(e.target,n))return;x.play(),(t=>{h=t.clientX||t.touches&&t.touches[0].clientX,p=t.clientY||t.touches&&t.touches[0].clientY})(e),k(h,p)},document.addEventListener(u,M,!1),f(),window.removeEventListener("resize",f,!1),window.addEventListener("resize",f,!1)},k=(t,e)=>{if(!P)return;const{particles:n}=P,a=i().timeline();for(const o of n){const{duration:n,easing:s}=o;let i=[];"circle"===o.shape?i=v(t,e,o):"star"===o.shape&&(i=w(t,e,o));const l=m(o);a.add({targets:i,duration:r(n),easing:s,update:b,...l})}a.play()};return t=>{"loading"===document.readyState?window.addEventListener("DOMContentLoaded",(()=>E(t)),{passive:!0}):E(t)}}));
