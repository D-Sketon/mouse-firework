!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firework=e()}(this,(function(){"use strict";class t{constructor(){this.queue=[]}add(t){return this.queue.push(new n(t)),this}play(){this.queue.forEach((t=>t.play()))}}const e={targets:null,duration:1/0,easing:"linear",update:null};var s=()=>{const t={linear:()=>t=>t},e={Sine:()=>t=>1-Math.cos(t*Math.PI/2),Circ:()=>t=>1-Math.sqrt(1-t*t),Back:()=>t=>t*t*(3*t-2),Bounce:()=>t=>{let e,s=4;for(;t<((e=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((3*e-2)/22-t,2)}};return["Quad","Cubic","Quart","Quint","Expo"].forEach(((t,s)=>{e[t]=()=>t=>Math.pow(t,s+2)})),Object.keys(e).forEach((s=>{const n=e[s];t["easeIn"+s]=n,t["easeOut"+s]=()=>t=>1-n()(1-t),t["easeInOut"+s]=()=>t=>t<.5?n()(2*t)/2:1-n()(-2*t+2)/2,t["easeOutIn"+s]=()=>t=>t<.5?(1-n()(1-2*t))/2:(n()(2*t-1)+1)/2})),t};class n{constructor(t=e){t=Object.assign({},e,t);const{targets:s,duration:n,easing:i,update:o,...a}=t;this.targets=s,this.duration=n,this.easing=i,this.update=o,this.dest=a||{},this.tl=null,this.isPlay=!1}timeline(){return null===this.tl&&(this.tl=new t),this.tl}play(){this.isPlay||(this.isPlay=!0,(t=>{const e=Date.now(),n=e+t.duration,i=!!t.targets,o=[],a=(t,e,s,n,i,o=!1)=>{t[i]=o?n:(n-e)*s+e},r=(n,i,r=!1)=>{t.targets.forEach(((l,h)=>{Object.keys(t.dest).forEach((d=>{const c=parseFloat(o[h][d]);let u=t.dest[d];if("object"==typeof u){if(!Array.isArray(u)){const{value:o,duration:h,easing:p}=u;i<=e+h?(n=s()[p||t.easing]()((i-e)/h),a(l,c,n,o,d)):r&&a(l,c,n,o,d,r)}}else"function"==typeof u&&(u=u(l,h)),a(l,c,n,u,d,r)}))}))},l=()=>{const o=Date.now();if(o>n)return r(1,o,!0),void(t.isPlay=!1);if(o<e)return void requestAnimationFrame(l);const a=s()[t.easing]()((o-e)/t.duration);i&&r(a,o),"function"==typeof t.update&&t.update(t.targets),requestAnimationFrame(l)};(()=>{if(i){Array.isArray(t.targets)||(t.targets=[t.targets]);for(const e of t.targets){const s={};for(const n in t.dest)s[n]=e[n];o.push(s)}}})(),l()})(this))}}const i=t=>new n(t);i.random=(t,e)=>Math.floor(Math.random()*(e-t+1))+t;const o=t=>Array.isArray(t)?i.random(t[0],t[1]):t,a=(t,e)=>{e=e.toUpperCase();do{if(null==t)break;if(t.nodeName===e)return!0}while(null!==(t=t.parentNode));return!1},r=(t,e)=>{var s;if(e.move.includes("emit")){let{emitRadius:n=[50,180]}=null!==(s=e.moveOptions)&&void 0!==s?s:{};const a=i.random(0,360)*Math.PI/180;n=o(n);const r=[-1,1][i.random(0,1)]*n;t.endPos={x:t.x+r*Math.cos(a),y:t.y+r*Math.sin(a)}}},l=(t,e)=>{var s;if(e.move.includes("rotate")){const{angle:n=[-180,180]}=null!==(s=e.moveOptions)&&void 0!==s?s:{};t.endRotation=o(n)}};class h{constructor(t,e,s,n,i,o,a){this.ctx=t,this.x=e,this.y=s,this.color=n,this.radius=i,this.alpha=o,this.lineWidth=a,this.rotation=0}draw(){const{ctx:t,x:e,y:s}=this;t.save(),t.translate(e,s),t.rotate(this.rotation*(Math.PI/180)),t.globalAlpha=this.alpha,this.paint(),this.lineWidth?(t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.stroke()):(t.fillStyle=this.color,t.fill()),t.globalAlpha=1,t.restore()}}class d extends h{paint(){this.ctx.beginPath(),this.ctx.arc(0,0,this.radius,0,2*Math.PI)}}class c extends h{constructor(t,e,s,n,i,o,a,r){super(t,e,s,n,i,o,r),this.sides=a}paint(){const{ctx:t,sides:e,radius:s}=this;t.beginPath(),t.moveTo(s*Math.cos(0),s*Math.sin(0));for(let n=1;n<=e;n++){const i=2*n*Math.PI/e;t.lineTo(s*Math.cos(i),s*Math.sin(i))}t.closePath()}}class u extends h{constructor(t,e,s,n,i,o,a,r){super(t,e,s,n,i,o,r),this.spikes=a}paint(){const{ctx:t,spikes:e,radius:s}=this;t.beginPath(),t.moveTo(0,0-s);for(let n=0;n<2*e;n++){const i=n*Math.PI/e-Math.PI/2,o=n%2==0?s:.5*s,a=Math.cos(i)*o,r=Math.sin(i)*o;t.lineTo(a,r)}t.closePath()}}const p=(t,e,s,n)=>{const a=o(n.number),{radius:h,alpha:c=1,lineWidth:u}=n.shapeOptions,p=[];for(let f=0;f<a;f++){const a=new d(t,e,s,n.colors[i.random(0,n.colors.length-1)],o(h),o(c),o(u));r(a,n),l(a,n),p.push(a)}return p},f=(t,e,s,n)=>{const a=o(n.number),{radius:h,alpha:d=1,lineWidth:c}=n.shapeOptions,p=o(n.shapeOptions.spikes),f=[];for(let g=0;g<a;g++){const a=new u(t,e,s,n.colors[i.random(0,n.colors.length-1)],o(h),o(d),p,o(c));r(a,n),l(a,n),f.push(a)}return f},g=(t,e,s,n)=>{const a=o(n.number),{radius:h,alpha:d=1,lineWidth:u}=n.shapeOptions,p=[],f=o(n.shapeOptions.sides);for(let g=0;g<a;g++){const a=new c(t,e,s,n.colors[i.random(0,n.colors.length-1)],o(h),o(d),f,o(u));r(a,n),l(a,n),p.push(a)}return p},m=document.createElement("canvas");m.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:9999999",document.body.appendChild(m);const y=m.getContext("2d"),v=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?"touchstart":"click";let w=0,x=0;const M=()=>{const t=window.devicePixelRatio||1;m.width=window.innerWidth*t,m.height=window.innerHeight*t,m.style.width=window.innerWidth+"px",m.style.height=window.innerHeight+"px",m.getContext("2d").scale(t,t)},P=t=>{var e,s;const{move:n}=t;let i={};if(n.includes("emit")){const{radius:s=.1,alphaChange:n=!1,alpha:a=0,alphaEasing:r="linear",alphaDuration:l=[600,800]}=null!==(e=t.moveOptions)&&void 0!==e?e:{};let h={};n&&(h={alpha:{value:o(a),easing:r,duration:o(l)}}),i={...i,x:t=>t.endPos.x,y:t=>t.endPos.y,radius:o(s),...h}}else if(n.includes("diffuse")){const{diffuseRadius:e=[80,160],lineWidth:n=0,alpha:a=0,alphaEasing:r="linear",alphaDuration:l=[600,800]}=null!==(s=t.moveOptions)&&void 0!==s?s:{};i={...i,radius:o(e),lineWidth:o(n),alpha:{value:o(a),easing:r,duration:o(l)}}}return n.includes("rotate")&&(i={...i,rotation:t=>t.endRotation}),i},b=t=>{for(const e of t)e.draw()},O=i({duration:1/0,update(){y.clearRect(0,0,m.width,m.height)}});let E=null,A=null;const k=t=>{A=t,E&&document.removeEventListener(v,E,!1),E=e=>{for(const s of t.excludeElements)if(a(e.target,s))return;O.play(),(t=>{w=t.clientX||t.touches&&t.touches[0].clientX,x=t.clientY||t.touches&&t.touches[0].clientY})(e),W(w,x)},document.addEventListener(v,E,!1),M(),window.removeEventListener("resize",M,!1),window.addEventListener("resize",M,!1)},W=(t,e)=>{if(!A)return;const{particles:s}=A,n=i().timeline();for(const i of s){const{duration:s,easing:a}=i;let r=[];"circle"===i.shape?r=p(y,t,e,i):"star"===i.shape?r=f(y,t,e,i):"polygon"===i.shape&&(r=g(y,t,e,i));const l=P(i);n.add({targets:r,duration:o(s),easing:a,update:b,...l})}n.play()};return t=>{"loading"===document.readyState?window.addEventListener("DOMContentLoaded",(()=>k(t)),{passive:!0}):k(t)}}));
