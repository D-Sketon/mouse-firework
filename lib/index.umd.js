!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firework=e()}(this,(function(){"use strict";class t{constructor(){this.queue=[]}add(t){return this.queue.push(new n(t)),this}play(){this.queue.forEach((t=>t.play()))}}const e={targets:null,duration:1/0,easing:"linear",update:null};var s=()=>{const t={linear:()=>t=>t},e={Sine:()=>t=>1-Math.cos(t*Math.PI/2),Circ:()=>t=>1-Math.sqrt(1-t*t),Back:()=>t=>t*t*(3*t-2),Bounce:()=>t=>{let e,s=4;for(;t<((e=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((3*e-2)/22-t,2)}};return["Quad","Cubic","Quart","Quint","Expo"].forEach(((t,s)=>{e[t]=()=>t=>Math.pow(t,s+2)})),Object.keys(e).forEach((s=>{const n=e[s];t["easeIn"+s]=n,t["easeOut"+s]=()=>t=>1-n()(1-t),t["easeInOut"+s]=()=>t=>t<.5?n()(2*t)/2:1-n()(-2*t+2)/2,t["easeOutIn"+s]=()=>t=>t<.5?(1-n()(1-2*t))/2:(n()(2*t-1)+1)/2})),t};class n{constructor(t=e){t=Object.assign({},e,t);const{targets:s,duration:n,easing:o,update:i,...a}=t;this.targets=s,this.duration=n,this.easing=o,this.update=i,this.dest=a||{},this.tl=null,this.isPlay=!1}timeline(){return null===this.tl&&(this.tl=new t),this.tl}play(){this.isPlay||(this.isPlay=!0,(t=>{const e=Date.now(),n=e+t.duration,o=!!t.targets,i=[],a=(t,e,s,n,o,i=!1)=>{t[o]=i?n:(n-e)*s+e},r=(n,o,r=!1)=>{t.targets.forEach(((l,c)=>{Object.keys(t.dest).forEach((d=>{const h=parseFloat(i[c][d]);let u=t.dest[d];if("object"==typeof u){if(!Array.isArray(u)){const{value:i,duration:c,easing:p}=u;o<=e+c?(n=s()[p||t.easing]()((o-e)/c),a(l,h,n,i,d)):r&&a(l,h,n,i,d,r)}}else"function"==typeof u&&(u=u(l,c)),a(l,h,n,u,d,r)}))}))},l=()=>{const i=Date.now();if(i>n)return r(1,i,!0),void(t.isPlay=!1);if(i<e)return void requestAnimationFrame(l);const a=s()[t.easing]()((i-e)/t.duration);o&&r(a,i),"function"==typeof t.update&&t.update(t.targets),requestAnimationFrame(l)};(()=>{if(o){Array.isArray(t.targets)||(t.targets=[t.targets]);for(const e of t.targets){const s={};for(const n in t.dest)s[n]=e[n];i.push(s)}}})(),l()})(this))}}const o=t=>new n(t);o.random=(t,e)=>Math.floor(Math.random()*(e-t+1))+t;const i=t=>Array.isArray(t)?o.random(t[0],t[1]):t,a=(t,e)=>{e=e.toUpperCase();do{if(null==t)break;if(t.nodeName===e)return!0}while(null!==(t=t.parentNode));return!1},r=(t,e)=>{var s;if(e.move.includes("emit")){let{emitRadius:n=[50,180]}=null!==(s=e.moveOptions)&&void 0!==s?s:{};const a=o.random(0,360)*Math.PI/180;n=i(n);const r=[-1,1][o.random(0,1)]*n;t.endPos={x:t.x+r*Math.cos(a),y:t.y+r*Math.sin(a)}}},l=(t,e)=>{var s;if(e.move.includes("rotate")){const{angle:n=[-180,180]}=null!==(s=e.moveOptions)&&void 0!==s?s:{};t.endRotation=i(n)}};class c{constructor(t,e,s,n,o,i,a){this.ctx=t,this.x=e,this.y=s,this.color=n,this.radius=o,this.alpha=i,this.lineWidth=a,this.rotation=0}draw(){const{ctx:t,x:e,y:s}=this;t.save(),t.translate(e,s),t.rotate(this.rotation*(Math.PI/180)),t.globalAlpha=this.alpha,this.paint(),this.lineWidth?(t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.stroke()):(t.fillStyle=this.color,t.fill()),t.globalAlpha=1,t.restore()}}class d extends c{paint(){this.ctx.beginPath(),this.ctx.arc(0,0,this.radius,0,2*Math.PI)}}class h extends c{constructor(t,e,s,n,o,i,a,r){super(t,e,s,n,o,i,r),this.sides=a}paint(){const{ctx:t,sides:e,radius:s}=this;t.beginPath(),t.moveTo(s*Math.cos(0),s*Math.sin(0));for(let n=1;n<=e;n++){const o=2*n*Math.PI/e;t.lineTo(s*Math.cos(o),s*Math.sin(o))}t.closePath()}}class u extends c{constructor(t,e,s,n,o,i,a,r){super(t,e,s,n,o,i,r),this.spikes=a}paint(){const{ctx:t,spikes:e,radius:s}=this;t.beginPath(),t.moveTo(0,0-s);for(let n=0;n<2*e;n++){const o=n*Math.PI/e-Math.PI/2,i=n%2==0?s:.5*s,a=Math.cos(o)*i,r=Math.sin(o)*i;t.lineTo(a,r)}t.closePath()}}const p=(t,e,s,n)=>{const a=i(n.number);let{radius:c,alpha:h=100,lineWidth:u}=n.shapeOptions;Array.isArray(h)?h=h.map((t=>100*t)):h*=100;const p=[];for(let f=0;f<a;f++){const a=new d(t,e,s,n.colors[o.random(0,n.colors.length-1)],i(c),i(h)/100,i(u));r(a,n),l(a,n),p.push(a)}return p},f=(t,e,s,n)=>{const a=i(n.number);let{radius:c,alpha:d=100,lineWidth:h}=n.shapeOptions;Array.isArray(d)?d=d.map((t=>100*t)):d*=100;const p=i(n.shapeOptions.spikes),f=[];for(let m=0;m<a;m++){const a=new u(t,e,s,n.colors[o.random(0,n.colors.length-1)],i(c),i(d)/100,p,i(h));r(a,n),l(a,n),f.push(a)}return f},m=(t,e,s,n)=>{const a=i(n.number);let{radius:c,alpha:d=100,lineWidth:u}=n.shapeOptions;Array.isArray(d)?d=d.map((t=>100*t)):d*=100;const p=[],f=i(n.shapeOptions.sides);for(let m=0;m<a;m++){const a=new h(t,e,s,n.colors[o.random(0,n.colors.length-1)],i(c),i(d)/100,f,i(u));r(a,n),l(a,n),p.push(a)}return p},g=document.createElement("canvas");g.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:9999999",document.body.appendChild(g);const y=g.getContext("2d"),v=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?"touchstart":"click";let x=0,w=0;const M=()=>{g.width=2*document.documentElement.clientWidth,g.height=2*document.documentElement.clientHeight,g.style.width=document.documentElement.clientWidth+"px",g.style.height=document.documentElement.clientHeight+"px";const t=g.getContext("2d");t.setTransform(1,0,0,1,0,0),t.scale(2,2)},A=t=>{var e,s,n,o;const{move:a}=t;let r={};if(a.includes("emit")){const{radius:n=.1,alphaChange:o=!1,alphaEasing:a="linear",alphaDuration:l=[600,800]}=null!==(e=t.moveOptions)&&void 0!==e?e:{};let{alpha:c=0}=null!==(s=t.moveOptions)&&void 0!==s?s:{};Array.isArray(c)?c=c.map((t=>100*t)):c*=100;let d={};o&&(d={alpha:{value:i(c)/100,easing:a,duration:i(l)}}),r={...r,x:t=>t.endPos.x,y:t=>t.endPos.y,radius:i(n),...d}}else if(a.includes("diffuse")){const{diffuseRadius:e=[80,160],lineWidth:s=0,alphaEasing:a="linear",alphaDuration:l=[600,800]}=null!==(n=t.moveOptions)&&void 0!==n?n:{};let{alpha:c=0}=null!==(o=t.moveOptions)&&void 0!==o?o:{};Array.isArray(c)?c=c.map((t=>100*t)):c*=100,r={...r,radius:i(e),lineWidth:i(s),alpha:{value:i(c)/100,easing:a,duration:i(l)}}}return a.includes("rotate")&&(r={...r,rotation:t=>t.endRotation}),r},P=t=>{for(const e of t)e.draw()},E=o({duration:1/0,update(){y.clearRect(0,0,g.width,g.height)}});let b=null,O=null;const k=t=>{O=t,b&&document.removeEventListener(v,b,!1),b=e=>{for(const s of t.excludeElements)if(a(e.target,s))return;E.play(),(t=>{x=t.clientX||t.touches&&t.touches[0].clientX,w=t.clientY||t.touches&&t.touches[0].clientY})(e),W(x,w)},document.addEventListener(v,b,!1),M(),window.removeEventListener("resize",M,!1),window.addEventListener("resize",M,!1)},W=(t,e)=>{if(!O)return;const{particles:s}=O,n=o().timeline();for(const o of s){const{duration:s,easing:a}=o;let r=[];"circle"===o.shape?r=p(y,t,e,o):"star"===o.shape?r=f(y,t,e,o):"polygon"===o.shape&&(r=m(y,t,e,o));const l=A(o);n.add({targets:r,duration:i(s),easing:a,update:P,...l})}n.play()};return t=>{"loading"===document.readyState?window.addEventListener("DOMContentLoaded",(()=>k(t)),{passive:!0}):k(t)}}));
