!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firework=e()}(this,(function(){"use strict";class t{constructor(){this.queue=[]}add(t){return this.queue.push(new a(t)),this}play(){this.queue.forEach((t=>t.play()))}}const e={targets:void 0,duration:1/0,easing:"linear",update:void 0};const s=(()=>{const t={linear:()=>t=>t},e={Sine:()=>t=>1-Math.cos(t*Math.PI/2),Expo:()=>t=>t?Math.pow(2,10*t-10):0,Circ:()=>t=>1-Math.sqrt(1-t*t),Back:()=>t=>t*t*(3*t-2),Bounce:()=>t=>{let e,s=4;for(;t<((e=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((3*e-2)/22-t,2)}};return["Quad","Cubic","Quart","Quint"].forEach(((t,s)=>{e[t]=()=>t=>Math.pow(t,s+2)})),Object.keys(e).forEach((s=>{const a=e[s];t["easeIn"+s]=a,t["easeOut"+s]=()=>t=>1-a()(1-t),t["easeInOut"+s]=()=>t=>t<.5?a()(2*t)/2:1-a()(-2*t+2)/2,t["easeOutIn"+s]=()=>t=>t<.5?(1-a()(1-2*t))/2:(a()(2*t-1)+1)/2})),t})();class a{constructor(t=e){t={...e,...t};const{targets:s,duration:a,easing:n,update:i,...o}=t;this.targets=s,this.duration=a,this.easing=n,this.update=i,this.dest=o||{},this.tl=null,this.isPlay=!1}timeline(){return this.tl||(this.tl=new t),this.tl}play(){this.isPlay||(this.isPlay=!0,(t=>{const e=Date.now(),a=e+t.duration,n=!!t.targets,i=[],o=(t,e,s,a,n,i=!1)=>{t[n]=i?a:(a-e)*s+e},r=(a,n,r=!1)=>{t.targets.forEach(((h,l)=>{Object.keys(t.dest).forEach((c=>{const d=parseFloat(i[l][c]);let u=t.dest[c];if("object"==typeof u){if(!Array.isArray(u)){const{value:a,duration:i,easing:l=t.easing}=u,p=s[l]()((n-e)/i);n<=e+i?o(h,d,p,a,c):r&&o(h,d,p,a,c,r)}}else"function"==typeof u&&(u=u(h,l)),o(h,d,a,u,c,r)}))}))},h=()=>{const i=Date.now();if(i>a)r(1,i,!0),t.isPlay=!1;else{if(i>=e){const a=s[t.easing]()((i-e)/t.duration);n&&r(a,i),"function"==typeof t.update&&t.update(t.targets)}requestAnimationFrame(h)}};(()=>{if(n){Array.isArray(t.targets)||(t.targets=[t.targets]);for(const e of t.targets){const s={};for(const a in t.dest)s[a]=e[a];i.push(s)}}})(),h()})(this))}}const n=t=>new a(t);n.random=(t,e)=>Math.floor(Math.random()*(e-t+1))+t;const i=t=>Array.isArray(t)?n.random(t[0],t[1]):t,o=t=>Array.isArray(t)?t.map((t=>100*t)):[100*t,100*t];class r{constructor(t,e,s,a,n,i,o){this.ctx=t,this.x=e,this.y=s,this.color=a,this.radius=n,this.alpha=i,this.lineWidth=o,this.rotation=0}draw(){const{ctx:t,x:e,y:s}=this;t.save(),t.translate(e,s),t.rotate(this.rotation*(Math.PI/180)),t.globalAlpha=this.alpha,this.paint(),this.lineWidth?(t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.stroke()):(t.fillStyle=this.color,t.fill()),t.globalAlpha=1,t.restore()}}class h extends r{constructor(t,e,s,a,n,i,o,r){super(t,e,s,a,n,i,r),this.sides=o}paint(){const{ctx:t,sides:e,radius:s}=this;t.beginPath(),t.moveTo(s*Math.cos(0),s*Math.sin(0));for(let a=1;a<=e;a++){const n=2*a*Math.PI/e;t.lineTo(s*Math.cos(n),s*Math.sin(n))}t.closePath()}}class l extends r{constructor(t,e,s,a,n,i,o,r){super(t,e,s,a,n,i,r),this.spikes=o}paint(){const{ctx:t,spikes:e,radius:s}=this;t.beginPath(),t.moveTo(0,-s);for(let a=0;a<2*e;a++){const n=a*Math.PI/e-Math.PI/2,i=a%2==0?s:.5*s,o=Math.cos(n)*i,r=Math.sin(n)*i;t.lineTo(o,r)}t.closePath()}}const c={circle:class extends r{paint(){const{ctx:t}=this;t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI),t.closePath()}},polygon:h,star:l},d=(t,e,s,a)=>{const r=c[a.shape],{shapeOptions:d,colors:u,number:p}=a;let{radius:f,alpha:m=1,lineWidth:y}=d;return m=o(m),Array.from({length:i(p)},(()=>{const o=u[n.random(0,u.length-1)],c=[t,e,s,o,i(f),i(m)/100];r===l?c.push(i(d.spikes)):r===h&&c.push(i(d.sides));const p=new r(...c,i(y));return((t,e)=>{const s=e.move.indexOf("emit");if(s>=0){const{emitRadius:a=[50,180]}=e.moveOptions[s]||{},o=n.random(0,360)*Math.PI/180,r=[-1,1][n.random(0,1)]*i(a);t.endPos={x:t.x+r*Math.cos(o),y:t.y+r*Math.sin(o)}}})(p,a),((t,e)=>{const s=e.move.indexOf("rotate");if(s>=0){const{angle:a=[-180,180]}=e.moveOptions[s]||{};t.endRotation=i(a)}})(p,a),p}))},u=document.createElement("canvas");u.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:9999999",document.body.appendChild(u);const p=u.getContext("2d"),f=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?"touchstart":"click";let m=0,y=0;const g=()=>{if(!p)return;const{clientWidth:t,clientHeight:e}=document.documentElement;u.width=2*t,u.height=2*e,u.style.width=t+"px",u.style.height=e+"px",p.setTransform(1,0,0,1,0,0),p.scale(2,2)},v=t=>{const{move:e,moveOptions:s}=t;let a={};return e.forEach(((t,e)=>{if("emit"===t){const{radius:t=.1,alphaChange:n=!1,alphaEasing:r="linear",alphaDuration:h=[600,800],alpha:l=0}=s[e]||{};a={x:t=>t.endPos.x,y:t=>t.endPos.y,radius:i(t)},n&&(a.alpha={value:i(o(l))/100,easing:r,duration:i(h)})}else if("diffuse"===t){const{diffuseRadius:t=[80,160],lineWidth:n=0,alphaEasing:r="linear",alphaDuration:h=[600,800],alpha:l=0}=s[e]||{};a={radius:i(t),lineWidth:i(n),alpha:{value:i(o(l))/100,easing:r,duration:i(h)}}}else"rotate"===t&&(a.rotation=t=>t.endRotation)})),a},x=t=>{for(const e of t)e.draw()},M=n({duration:1/0,update(){p&&p.clearRect(0,0,u.width,u.height)}});let w=null,P=null;const A=t=>{P=t,w&&document.removeEventListener(f,w,!1),w=e=>{t.excludeElements.some((t=>((t,e)=>{for(e=e.toUpperCase();t;){if(t.nodeName===e)return!0;t=t.parentNode}return!1})(e.target,t)))||(M.play(),(t=>{var e,s;m=null!==(e=t.clientX)&&void 0!==e?e:t.touches&&t.touches[0].clientX,y=null!==(s=t.clientY)&&void 0!==s?s:t.touches&&t.touches[0].clientY})(e),E(m,y))},document.addEventListener(f,w,!1),g(),window.removeEventListener("resize",g,!1),window.addEventListener("resize",g,!1)},E=(t,e)=>{if(!P||!p)return;const{particles:s}=P,a=n().timeline();s.forEach((s=>{const{move:n,moveOptions:o}=s;s.move=Array.isArray(n)?n:[n],s.moveOptions=o?Array.isArray(o)?o:[o]:[],a.add({targets:d(p,t,e,s),duration:i(s.duration),easing:s.easing||"linear",update:x,...v(s)})})),a.play()};return t=>{"loading"===document.readyState?window.addEventListener("DOMContentLoaded",(()=>A(t)),{passive:!0}):A(t)}}));
