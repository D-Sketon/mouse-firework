!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firework=e()}(this,(function(){"use strict";class t{constructor(){this.queue=[]}add(t){return this.queue.push(new o(t)),this}play(){this.queue.forEach((t=>t.play()))}}const e={targets:null,duration:1/0,easing:"linear",delay:0,begin:null,update:null,complete:null};var a=()=>{const t={linear:()=>t=>t},e={Sine:()=>t=>1-Math.cos(t*Math.PI/2),Circ:()=>t=>1-Math.sqrt(1-t*t),Back:()=>t=>t*t*(3*t-2),Bounce:()=>t=>{let e,a=4;for(;t<((e=Math.pow(2,--a))-1)/11;);return 1/Math.pow(4,3-a)-7.5625*Math.pow((3*e-2)/22-t,2)}};return["Quad","Cubic","Quart","Quint","Expo"].forEach(((t,a)=>{e[t]=()=>t=>Math.pow(t,a+2)})),Object.keys(e).forEach((a=>{const n=e[a];t["easeIn"+a]=n,t["easeOut"+a]=()=>t=>1-n()(1-t),t["easeInOut"+a]=()=>t=>t<.5?n()(2*t)/2:1-n()(-2*t+2)/2,t["easeOutIn"+a]=()=>t=>t<.5?(1-n()(1-2*t))/2:(n()(2*t-1)+1)/2})),t};const n=["translateX","translateY","translateZ"],s=(t,e)=>t instanceof HTMLElement&&t.style&&"transform"in t.style&&n.includes(e)?"transform":t instanceof HTMLElement&&t.style&&e in t.style?"style":"attribute";class o{constructor(t=e){t=Object.assign({},e,t);const{targets:a,duration:n,easing:s,delay:o,begin:i,update:r,complete:l,...d}=t;this.targets=a,this.duration=n,this.easing=s,this.delay=o,this.begin=i,this.update=r,this.complete=l,this.dest=d||{},this.tl=null,this.isPlay=!1}timeline(){return null===this.tl&&(this.tl=new t),this.tl}play(){this.isPlay||(this.isPlay=!0,(t=>{const e=Date.now()+t.delay,n=e+t.duration,o=!!t.targets,i=[],r=(t,e,a,n,o,i=!1)=>{let r;if("string"==typeof n)if(n.endsWith("%"))r="%",n=parseFloat(n);else{if(!n.endsWith("px"))throw new TypeError("string value must ends with '%' or 'px'");r="px",n=parseFloat(n)}let l=i?n:(n-e)*a+e;switch(r&&(l+=r),s(t,o)){case"transform":t.style.transform=r?`${o}(${l})`:`${o}(${l}px)`;break;case"style":t.style[o]=l;break;case"attribute":t[o]=l}},l=(n,s,o=!1)=>{t.targets.forEach(((l,d)=>{Object.keys(t.dest).forEach((c=>{const u=parseFloat(i[d][c]);let h=t.dest[c];if("object"==typeof h)if(Array.isArray(h)){let i=0;for(;i<h.length&&!(s-e<h[i].startTimeStamp);i++);const{value:d,duration:p,easing:f,startTimeStamp:y}=h[i-1];s<=e+p+y?(n=a()[f||t.easing]()((s-e)/p),r(l,u,n,d,c)):o&&r(l,u,n,d,c,o)}else{const{value:i,duration:d,easing:p}=h;s<=e+d?(n=a()[p||t.easing]()((s-e)/d),r(l,u,n,i,c)):o&&r(l,u,n,i,c,o)}else"function"==typeof h&&(h=h(l,d)),r(l,u,n,h,c,o)}))}))},d=()=>{const s=Date.now();if(s>n)return l(1,s,!0),"function"==typeof t.complete&&t.complete(t.targets),void(t.isPlay=!1);if(s<e)return void requestAnimationFrame(d);const i=a()[t.easing]()((s-e)/t.duration);o&&l(i,s),"function"==typeof t.update&&t.update(t.targets),requestAnimationFrame(d)};(()=>{if(o){Array.isArray(t.targets)||(t.targets=[t.targets]);for(const e of t.targets){const a={};for(const n in t.dest){const o=t.dest[n];if(Array.isArray(o))if(2===o.length&&"object"!=typeof o[0]){switch(s(e,n)){case"transform":"string"==typeof o[0]?e.style.transform=`${n}(${o[0]})`:e.style.transform=`${n}(${o[0]}px)`;break;case"style":e.style[n]=o[0];break;case"attribute":e[n]=o[0]}a[n]=o[0],t.dest[n]=o[1]}else{let t=0;for(let e of o)e.startTimeStamp=t,t+=e.duration;a[n]=e[n]}else switch(s(e,n)){case"transform":const t=new RegExp(`${n}((w+))`,"g");a[n]=e.style.transform.match(t)[0];break;case"style":a[n]=e.style[n];break;case"attribute":a[n]=e[n]}}i.push(a)}}})(),"function"==typeof t.begin&&t.begin(t.targets),d()})(this))}}const i=t=>new o(t);i.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};const r=t=>Array.isArray(t)?i.random(t[0],t[1]):t,l=(t,e)=>{e=e.toUpperCase();do{if(null==t)break;if(t.nodeName===e)return!0}while(null!==(t=t.parentNode));return!1},d=document.createElement("canvas");d.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:9999999",document.body.appendChild(d);const c=d.getContext("2d"),u=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?"touchstart":"click";let h=0,p=0;const f=()=>{d.width=2*window.innerWidth,d.height=2*window.innerHeight,d.style.width=window.innerWidth+"px",d.style.height=window.innerHeight+"px",d.getContext("2d").scale(2,2)},y=(t,e)=>{var a;const{move:n}=e;if("emit"===n){const{emitRadius:n=[50,180]}=null!==(a=e.moveOptions)&&void 0!==a?a:{};t.endPos=((t,e)=>{const a=i.random(0,360)*Math.PI/180,n=[-1,1][i.random(0,1)]*e;return{x:t.x+n*Math.cos(a),y:t.y+n*Math.sin(a)}})(t,r(n))}},g=t=>{var e,a;const{move:n}=t;switch(n){case"emit":{const{radius:a=.1,alphaChange:n=!1,alpha:s=0,alphaEasing:o="linear",alphaDuration:i=[600,800]}=null!==(e=t.moveOptions)&&void 0!==e?e:{};let l={};return n&&(l={alpha:{value:r(s),easing:o,duration:r(i)}}),{x:t=>t.endPos.x,y:t=>t.endPos.y,radius:r(a),...l}}case"diffuse":{const{diffuseRadius:e=[80,160],lineWidth:n=0,alpha:s=0,alphaEasing:o="linear",alphaDuration:i=[600,800]}=null!==(a=t.moveOptions)&&void 0!==a?a:{};return{radius:r(e),lineWidth:r(n),alpha:{value:r(s),easing:o,duration:r(i)}}}}},m=(t,e,a)=>{const n=r(a.number),{radius:s,alpha:o=1}=a.shapeOptions,l=[];for(let d=0;d<n;d++){const n={x:t,y:e,color:void 0,radius:void 0,endPos:void 0,draw(){c.globalAlpha=n.alpha,c.beginPath(),c.arc(n.x,n.y,n.radius,0,2*Math.PI,!0),c.fillStyle=n.color,c.fill(),c.globalAlpha=1}};n.color=a.colors[i.random(0,a.colors.length-1)],n.radius=r(s),n.alpha=r(o),y(n,a),l.push(n)}return l},w=(t,e,a)=>{const n=r(a.number),{radius:s,alpha:o=1,lineWidth:l}=a.shapeOptions,d=[];for(let u=0;u<n;u++){const n={x:t,y:e,color:void 0,radius:void 0,endPos:void 0,draw(){c.globalAlpha=n.alpha,c.beginPath(),c.arc(n.x,n.y,n.radius,0,2*Math.PI,!0),c.lineWidth=n.lineWidth,c.strokeStyle=n.color,c.stroke(),c.globalAlpha=1}};n.color=a.colors[i.random(0,a.colors.length-1)],n.radius=r(s),n.alpha=r(o),n.lineWidth=r(l),y(n,a),d.push(n)}return d},v=t=>{for(const e of t)e.draw()},b=i({duration:1/0,update(){c.clearRect(0,0,d.width,d.height)}});let x=null,E=null;const P=t=>{E=t,x&&document.removeEventListener(u,x,!1),x=e=>{for(const a of t.excludeElements)if(l(e.target,a))return;b.play(),(t=>{h=t.clientX||t.touches&&t.touches[0].clientX,p=t.clientY||t.touches&&t.touches[0].clientY})(e),M(h,p)},document.addEventListener(u,x,!1),f(),window.removeEventListener("resize",f,!1),window.addEventListener("resize",f,!1)},M=(t,e)=>{if(!E)return;const{particles:a}=E,n=i().timeline();for(const s of a){const{duration:a,easing:o}=s;let i=[];"circle"===s.shape?i=m(t,e,s):"ring"===s.shape&&(i=w(t,e,s));const l=g(s);n.add({targets:i,duration:r(a),easing:o,update:v,...l})}n.play()};return t=>{"loading"===document.readyState?window.addEventListener("DOMContentLoaded",(()=>P(t)),{passive:!0}):P(t)}}));
